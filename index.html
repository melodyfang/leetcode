<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
<script>
var maximalRectangle = function(arr) {
    const res = []
    if (!arr.length) {
        return 0
    }
    for(let i = 0; i < arr.length; i++) {
        const flatArr = arr[i]
        let tmp = []
        for(let j = 0; j < flatArr.length; j++) {
            const item = flatArr[j]
            if (item == 1) {
                tmp.push(j)
            } else {
                tmp.length = 0
            }
        }
        const copy = tmp.slice()
        if (copy.length > 1) {
            const dest = [copy[0], copy[copy.length - 1]]
            res.push(dest)
        }
    }

    // 求交集
    let dest = []
    let max1 = 0
    let max2 = 0
    let x = 1
    let y = 1
    for(let i = 0; i < res.length - 1; i++) {
        if (max1 < Math.abs(res[i + 1][0] - res[i][0])) {
            max1 = Math.abs(res[i + 1][0] - res[i][0])
        } else if (res[i + 1][0] - res[i][0]) {
            max1 = res[i + 1][0]
        }


        if (max2 < Math.abs(res[i + 1][1] - res[i][1])) {
            max2 = Math.abs(res[i + 1][1] - res[i][1])
        } else if (res[i + 1][1] === res[i][1]) {
            max2 = res[i + 1][1]
        }
        dest = [max1, max2]
        x = max2 - max1 + 1
        y = res.length
    }
    
    return x * y
};

// const arr = [
//   ["1","0","1","0","0"],
//   ["1","0","1","1","1"],
//   ["1","1","1","1","1"],
//   ["1","0","0","1","0"]
// ]

const arr = [
  ["1","0","1","0","0"],
  ["1","0","1","1","1","1"],
  ["1","1","1","1","1","1"],
  ["1","0","0","1","1","1"]
]

console.log(maximalRectangle(arr))
</script>
</body>
</html>