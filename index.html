<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
<script>
var hasGroupsSizeX11 = function(deck) {
    const obj = {}
    deck.forEach(d => {
      if (obj[d]) {
        obj[d].push(d)
      } else {
        obj[d] = [d]
      }
    })

    const vals = Object.values(obj)
    let min = Number.MAX_SAFE_INTEGER
    for (let i = 0; i < vals.length; i++) {
      if (min > vals[i].length) {
        min = vals[i].length
      }
    }

    if (vals.length === 1 && vals[0].length === 1) {
      return false
    }

    for (let i = 0; i < vals.length; i++) {
      if (vals[i].length % min !== 0) {
        return false
      }
    }
    return true
};

function hasGroupsSizeX (arr) {
  arr.sort((a, b) => a - b)
    let min = Number.MIN_SAFE_INTEGER
    let dest = []
    let result = true
    for (let i = 0, tmp = []; i < arr.length; i++) {
      tmp.push(arr[i])
      for (let j = i + 1; j < arr.length - 1; j++) {
        if (arr[i] === arr[j]) {
          tmp.push(arr[j])
        } else {
          if (min > tmp.length) {
            min = tmp.length
          }
          dest.push(tmp.slice())
          tmp.length = 0
          i = j
          break
        }
      }
    }

    dest.every(item => {
      if (item.length % min !== 0) {
        result = false
        return false
      }
    })
    return result
}

console.log(hasGroupsSizeX([1,2,3,4,4,3,2,1]))
console.log(hasGroupsSizeX([1,1,1,2,2,2,3,3]))
console.log(hasGroupsSizeX([1]))
console.log(hasGroupsSizeX([1, 1]))

</script>
</body>
</html>